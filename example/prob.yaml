# Matmul m x k x n = 100 x 300 x 200
loop_nest:
  - iter_name: "m"
    bounds: [0, 100]
    step: 1
  - iter_name: "k"
    step: 1
    bounds: [0, 300]
  - iter_name: "n"
    bounds: [0, 200]
    step: 1
body:
  - !DataLoad
    array_name: "A"
    addr:
      vars:
        "m": 300
        "k": 1
      constant: 0
  - !DataLoad
    array_name: "B"
    addr:
      vars:
        "k": 200
        "n": 1
      constant: 0
  - !DataLoad
    array_name: "C"
    addr:
      vars:
        "m": 200
        "n": 1
      constant: 0
  - !Compute
    op: "mac"
  - !DataStore
    array_name: "store_C"
    addr:
      vars:
        "m": 200
        "n": 1
      constant: 0

conditionals:
  - cond_comp_loops:
      - !DataLoad
        array_name: "load_A"
        addr:
          vars:
            "m": 300
            "k": 1
          constant: 0
      - !Compute
        op: "cmp"
    skipped_loops: ["n"]
    prob: 0.5
